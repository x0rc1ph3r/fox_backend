enum TransactionType {
  RAFFLE_CREATION
  RAFFLE_ENTRY
  RAFFLE_WIN
  RAFFLE_CANCEL
  RAFFLE_END
  RAFFLE_CLAIM
  RAFFLE_REFUND
  RAFFLE_PURCHASE
  RAFFLE_DEPOSIT
}

model Transaction {
  id            String          @id @default(uuid())
  transactionId String          @unique
  type          TransactionType
  sender        String
  receiver      String
  createdAt     DateTime        @default(now())
  amount        BigInt
  isNft         Boolean         @default(false)
  mintAddress   String          //a unified field for both token and nft transactions
  metadata      Json?           //metadata for the transaction
  
  entryId       Int?            
  raffleId      Int?            
  entry       Entry?            @relation("TransactionEntry", fields: [entryId], references: [id])
  raffle      Raffle?           @relation("TransactionRaffle", fields: [raffleId], references: [id])
  
  user          User            @relation(fields: [sender], references: [walletAddress])
  @@map("transactions")
  @@index([sender])
  @@index([receiver])
  @@index([transactionId])
  @@index([entryId])
  @@index([raffleId])
}

